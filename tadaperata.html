<!DOCTYPE html>
<html lang="te">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>‡∞§‡∞¶‡∞™‡±á‡∞∞‡∞æ‡∞ü</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Telugu:wght@400;700&family=Baloo+2:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Baloo 2', 'Noto Sans Telugu', sans-serif;
            touch-action: none; /* Prevents default touch behaviors like scrolling/zooming */
            overscroll-behavior: none;
            overflow: hidden; /* Prevent scrolling on the body */
        }
        .telugu-text {
            font-family: 'Noto Sans Telugu', sans-serif;
        }
        @keyframes correct-pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }
        .correct-pop-animation {
            animation: correct-pop 0.5s ease-in-out;
        }
        @keyframes incorrect-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .incorrect-shake-animation {
            animation: incorrect-shake 0.4s ease-in-out;
        }
        .letter-tile {
            touch-action: none;
            cursor: grab;
            user-select: none;
        }
        .letter-tile:active {
            cursor: grabbing;
        }
        .answer-slot {
            min-height: 5rem; /* Adjusted for potentially smaller screens */
        }
        /* Style for the element being dragged */
        .dragging-active {
            opacity: 0.5;
            transform: scale(1.1);
        }
        /* Style for the modal overlay */
        .modal-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        /* Hide scrollbars */
        ::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body class="bg-sky-100">

    <div id="game-container" class="flex flex-col h-screen w-screen p-2 sm:p-4 text-center select-none">
        
        <!-- Header: Score, Level, and Timer -->
        <header class="flex justify-between items-center w-full max-w-2xl mx-auto mb-4">
            <div class="bg-white/70 rounded-xl px-3 py-2 shadow-md">
                <h2 class="text-lg font-bold text-blue-600">‡∞∏‡±ç‡∞ï‡±ã‡∞∞‡±Å</h2>
                <p id="score" class="text-2xl font-bold text-blue-800">0</p>
            </div>
            <div class="text-center">
                 <h1 class="text-3xl font-bold text-indigo-700">‡∞§‡∞¶‡∞™‡±á‡∞∞‡∞æ‡∞ü</h1>
                 <p id="level-display" class="text-xl font-bold text-indigo-500"></p>
            </div>
            <div class="bg-white/70 rounded-xl px-3 py-2 shadow-md">
                <h2 class="text-lg font-bold text-red-600">‡∞∏‡∞Æ‡∞Ø‡∞Ç</h2>
                <p id="timer" class="text-2xl font-bold text-red-800">10</p>
            </div>
        </header>

        <!-- Main Game Area -->
        <main id="main-game-area" class="flex-grow flex flex-col items-center justify-center w-full max-w-2xl mx-auto">
            <div id="emoji-container" class="text-8xl md:text-9xl mb-6"></div>
            <div id="answer-slots" class="flex justify-center flex-wrap items-center gap-2 md:gap-4 mb-8 w-full min-h-[5rem]"></div>
            <div id="feedback-message" class="text-3xl font-bold h-10 mb-4 transition-all duration-300"></div>
            <div id="letter-tiles-container" class="bg-white/50 rounded-2xl p-4 w-full">
                 <div id="letter-tiles" class="flex justify-center flex-wrap items-center gap-2 md:gap-4 min-h-[5rem]"></div>
            </div>
        </main>
        
        <!-- Start/Next Button -->
        <footer id="start-footer" class="flex-grow flex items-center justify-center">
            <button id="start-button" class="w-full max-w-xs mx-auto bg-green-500 hover:bg-green-600 text-white text-3xl font-bold py-4 px-8 rounded-full shadow-lg transition-transform transform hover:scale-105">
                ‡∞Ü‡∞ü ‡∞Æ‡±ä‡∞¶‡∞≤‡±Å‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡±Å
            </button>
        </footer>
    </div>

    <!-- Modals -->
    <div id="modal-container">
        <!-- Level Transition Modal -->
        <div id="level-modal" class="hidden modal-overlay fixed inset-0 bg-black/50 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl p-8 text-center max-w-md w-full">
                <h2 id="level-modal-title" class="text-5xl font-bold text-indigo-700 mb-6"></h2>
                <button id="start-level-button" class="w-full bg-green-500 hover:bg-green-600 text-white text-3xl font-bold py-4 px-8 rounded-full shadow-lg">‡∞Æ‡±ä‡∞¶‡∞≤‡±Å</button>
            </div>
        </div>

        <!-- Game Over Modal -->
        <div id="game-over-modal" class="hidden modal-overlay fixed inset-0 bg-black/50 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl p-8 text-center max-w-md w-full">
                <h2 id="game-over-title" class="text-5xl font-bold text-indigo-700 mb-4">‡∞Ü‡∞ü ‡∞Æ‡±Å‡∞ó‡∞ø‡∞∏‡∞ø‡∞Ç‡∞¶‡∞ø!</h2>
                <p id="game-over-message" class="text-xl text-slate-600 mb-4"></p>
                <p class="text-2xl text-slate-600 mb-2">‡∞Æ‡±Ä ‡∞§‡±Å‡∞¶‡∞ø ‡∞∏‡±ç‡∞ï‡±ã‡∞∞‡±Å:</p>
                <p id="final-score" class="text-7xl font-bold text-amber-500 mb-8">0</p>
                <button id="play-again-button" class="w-full bg-blue-500 hover:bg-blue-600 text-white text-3xl font-bold py-4 px-8 rounded-full shadow-lg transition-transform transform hover:scale-105">
                    ‡∞Æ‡∞≥‡±ç‡∞≥‡±Ä ‡∞Ü‡∞°‡±Å
                </button>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- GAME DATA ---
        const wordLevels = {
            1: [ // Level 1: 2-Syllable words
                { emoji: 'üçé', te: '‡∞™‡∞Ç‡∞°‡±Å', letters: ['‡∞™‡∞Ç', '‡∞°‡±Å'] }, { emoji: 'üëÄ', te: '‡∞ï‡∞≥‡±ç‡∞≥‡±Å', letters: ['‡∞ï', '‡∞≥‡±ç‡∞≥‡±Å'] }, { emoji: 'üè†', te: '‡∞á‡∞≤‡±ç‡∞≤‡±Å', letters: ['‡∞á', '‡∞≤‡±ç‡∞≤‡±Å'] }, { emoji: 'üê∂', te: '‡∞ï‡±Å‡∞ï‡±ç‡∞ï', letters: ['‡∞ï‡±Å', '‡∞ï‡±ç‡∞ï'] }, { emoji: 'üê±', te: '‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø', letters: ['‡∞™‡∞ø', '‡∞≤‡±ç‡∞≤‡∞ø'] }, { emoji: '‚öΩ', te: '‡∞¨‡∞Ç‡∞§‡∞ø', letters: ['‡∞¨‡∞Ç', '‡∞§‡∞ø'] }, { emoji: 'üöó', te: '‡∞ï‡∞æ‡∞∞‡±Å', letters: ['‡∞ï‡∞æ', '‡∞∞‡±Å'] }, { emoji: 'üíß', te: '‡∞®‡±Ä‡∞∞‡±Å', letters: ['‡∞®‡±Ä', '‡∞∞‡±Å'] }, { emoji: 'üß±', te: '‡∞ó‡±ã‡∞°', letters: ['‡∞ó‡±ã', '‡∞°'] }, { emoji: 'üè∞', te: '‡∞Æ‡±á‡∞°', letters: ['‡∞Æ‡±á', '‡∞°'] }, { emoji: 'üê¶', te: '‡∞ï‡∞æ‡∞ï‡∞ø', letters: ['‡∞ï‡∞æ', '‡∞ï‡∞ø'] }, { emoji: 'üèûÔ∏è', te: '‡∞®‡∞¶‡∞ø', letters: ['‡∞®', '‡∞¶‡∞ø'] }, { emoji: 'üïäÔ∏è', te: '‡∞™‡∞ï‡±ç‡∞∑‡∞ø', letters: ['‡∞™', '‡∞ï‡±ç‡∞∑‡∞ø'] }, { emoji: 'ü™®', te: '‡∞∞‡∞æ‡∞Ø‡∞ø', letters: ['‡∞∞‡∞æ', '‡∞Ø‡∞ø'] }, { emoji: 'üí®', te: '‡∞ó‡∞æ‡∞≤‡∞ø', letters: ['‡∞ó‡∞æ', '‡∞≤‡∞ø'] }, { emoji: '‚òÅÔ∏è', te: '‡∞Æ‡±á‡∞ò‡∞Ç', letters: ['‡∞Æ‡±á', '‡∞ò‡∞Ç'] }, { emoji: 'üçá', te: '‡∞¶‡±ç‡∞∞‡∞æ‡∞ï‡±ç‡∞∑', letters: ['‡∞¶‡±ç‡∞∞‡∞æ', '‡∞ï‡±ç‡∞∑'] }, { emoji: 'ü¶ä', te: '‡∞®‡∞ï‡±ç‡∞ï', letters: ['‡∞®', '‡∞ï‡±ç‡∞ï'] }, { emoji: 'üí°', te: '‡∞¶‡±Ä‡∞™‡∞Ç', letters: ['‡∞¶‡±Ä', '‡∞™‡∞Ç'] }, { emoji: 'ü¶∑', te: '‡∞¶‡∞Ç‡∞§‡∞Ç', letters: ['‡∞¶‡∞Ç', '‡∞§‡∞Ç'] }
            ],
            2: [ // Level 2: 3-Syllable words
                { emoji: 'üêò', te: '‡∞è‡∞®‡±Å‡∞ó‡±Å', letters: ['‡∞è', '‡∞®‡±Å', '‡∞ó‡±Å'] }, { emoji: 'ü•≠', te: '‡∞Æ‡∞æ‡∞Æ‡∞ø‡∞°‡∞ø', letters: ['‡∞Æ‡∞æ', '‡∞Æ‡∞ø', '‡∞°‡∞ø'] }, { emoji: 'üçå', te: '‡∞Ö‡∞∞‡∞ü‡∞ø', letters: ['‡∞Ö', '‡∞∞', '‡∞ü‡∞ø'] }, { emoji: 'üè∫', te: '‡∞ï‡∞°‡∞µ', letters: ['‡∞ï', '‡∞°', '‡∞µ'] }, { emoji: 'üêøÔ∏è', te: '‡∞â‡∞°‡±Å‡∞§', letters: ['‡∞â', '‡∞°‡±Å', '‡∞§'] }, { emoji: 'üíç', te: '‡∞â‡∞Ç‡∞ó‡∞∞‡∞Ç', letters: ['‡∞â‡∞Ç', '‡∞ó', '‡∞∞‡∞Ç'] }, { emoji: '‚õµ', te: '‡∞™‡∞°‡∞µ', letters: ['‡∞™', '‡∞°', '‡∞µ'] }, { emoji: 'üå∫', te: '‡∞ï‡∞Æ‡∞≤‡∞Ç', letters: ['‡∞ï', '‡∞Æ', '‡∞≤‡∞Ç'] }, { emoji: 'üåå', te: '‡∞Ü‡∞ï‡∞æ‡∞∂‡∞Ç', letters: ['‡∞Ü', '‡∞ï‡∞æ', '‡∞∂‡∞Ç'] }, { emoji: 'üñºÔ∏è', te: '‡∞ï‡∞ø‡∞ü‡∞ø‡∞ï‡±Ä', letters: ['‡∞ï‡∞ø', '‡∞ü‡∞ø', '‡∞ï‡±Ä'] }, { emoji: 'ü™Å', te: '‡∞™‡∞§‡∞Ç‡∞ó‡∞ø', letters: ['‡∞™', '‡∞§‡∞Ç', '‡∞ó‡∞ø'] }, { emoji: 'üèûÔ∏è', te: '‡∞Ö‡∞°‡∞µ‡∞ø', letters: ['‡∞Ö', '‡∞°', '‡∞µ‡∞ø'] }, { emoji: '‚úçÔ∏è', te: '‡∞™‡∞≤‡∞ï', letters: ['‡∞™', '‡∞≤', '‡∞ï'] }, { emoji: 'üö™', te: '‡∞ó‡∞°‡∞™', letters: ['‡∞ó', '‡∞°', '‡∞™'] }, { emoji: 'üçÖ', te: '‡∞ü‡∞Æ‡±ã‡∞ü‡∞æ', letters: ['‡∞ü', '‡∞Æ‡±ã', '‡∞ü‡∞æ'] }, { emoji: 'üìñ', te: '‡∞™‡±Å‡∞∏‡±ç‡∞§‡∞ï‡∞Ç', letters: ['‡∞™‡±Å', '‡∞∏‡±ç‡∞§', '‡∞ï‡∞Ç'] }, { emoji: '‚òÄÔ∏è', te: '‡∞∏‡±Ç‡∞∞‡±ç‡∞Ø‡±Å‡∞°‡±Å', letters: ['‡∞∏‡±Ç', '‡∞∞‡±ç‡∞Ø‡±Å', '‡∞°‡±Å'] }, { emoji: 'üåô', te: '‡∞ö‡∞Ç‡∞¶‡±ç‡∞∞‡±Å‡∞°‡±Å', letters: ['‡∞ö‡∞Ç', '‡∞¶‡±ç‡∞∞‡±Å', '‡∞°‡±Å'] }, { emoji: 'üëÇ', te: '‡∞ö‡±Ü‡∞µ‡±Å‡∞≤‡±Å', letters: ['‡∞ö‡±Ü', '‡∞µ‡±Å', '‡∞≤‡±Å'] }, { emoji: 'üëß', te: '‡∞ú‡∞°‡∞≤‡±Å', letters: ['‡∞ú', '‡∞°', '‡∞≤‡±Å'] }
            ],
            3: [ // Level 3: 4-Syllable words
                { emoji: 'üè´', te: '‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤', letters: ['‡∞™‡∞æ', '‡∞†', '‡∞∂‡∞æ', '‡∞≤'] }, { emoji: 'ü¶ü', te: '‡∞¶‡±ã‡∞Æ‡∞§‡±Ü‡∞∞', letters: ['‡∞¶‡±ã', '‡∞Æ', '‡∞§‡±Ü', '‡∞∞'] }, { emoji: 'üßÖ', te: '‡∞â‡∞≤‡±ç‡∞≤‡∞ø‡∞™‡∞æ‡∞Ø', letters: ['‡∞â', '‡∞≤‡±ç‡∞≤‡∞ø', '‡∞™‡∞æ', '‡∞Ø'] }, { emoji: 'üõå', te: '‡∞§‡∞≤‡∞ó‡∞°', letters: ['‡∞§', '‡∞≤', '‡∞ó', '‡∞°'] }, { emoji: 'üï∞Ô∏è', te: '‡∞ó‡∞°‡∞ø‡∞Ø‡∞æ‡∞∞‡∞Ç', letters: ['‡∞ó', '‡∞°‡∞ø', '‡∞Ø‡∞æ', '‡∞∞‡∞Ç'] }, { emoji: 'üî•', te: '‡∞Ö‡∞ó‡±ç‡∞ó‡∞ø‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡±Ü', letters: ['‡∞Ö', '‡∞ó‡±ç‡∞ó‡∞ø', '‡∞™‡±Ü', '‡∞ü‡±ç‡∞ü‡±Ü'] }, { emoji: 'üîî', te: '‡∞¨‡∞°‡∞ø‡∞ó‡∞Ç‡∞ü', letters: ['‡∞¨', '‡∞°‡∞ø', '‡∞ó‡∞Ç', '‡∞ü'] }, { emoji: '‚úàÔ∏è', te: '‡∞µ‡∞ø‡∞Æ‡∞æ‡∞®‡∞Ç', letters: ['‡∞µ‡∞ø', '‡∞Æ‡∞æ', '‡∞®‡∞Ç'] }, { emoji: 'ü¶Å', te: '‡∞ú‡∞Ç‡∞§‡±Å‡∞∂‡∞æ‡∞≤', letters: ['‡∞ú‡∞Ç', '‡∞§‡±Å', '‡∞∂‡∞æ', '‡∞≤'] }, { emoji: 'üöÇ', te: '‡∞∞‡±à‡∞≤‡±Å‡∞¨‡∞Ç‡∞°‡∞ø', letters: ['‡∞∞‡±à', '‡∞≤‡±Å', '‡∞¨‡∞Ç', '‡∞°‡∞ø'] }, { emoji: 'üêê', te: '‡∞Æ‡±á‡∞ï‡∞™‡∞ø‡∞≤‡±ç‡∞≤', letters: ['‡∞Æ‡±á', '‡∞ï', '‡∞™‡∞ø', '‡∞≤‡±ç‡∞≤'] }, { emoji: 'üöÄ', te: '‡∞Ö‡∞Ç‡∞§‡∞∞‡∞ø‡∞ï‡±ç‡∞∑‡∞Ç', letters: ['‡∞Ö‡∞Ç', '‡∞§', '‡∞∞‡∞ø', '‡∞ï‡±ç‡∞∑‡∞Ç'] }, { emoji: 'üíª', te: '‡∞ï‡∞Ç‡∞™‡±ç‡∞Ø‡±Ç‡∞ü‡∞∞‡±Å', letters: ['‡∞ï‡∞Ç', '‡∞™‡±ç‡∞Ø‡±Ç', '‡∞ü', '‡∞∞‡±Å'] }, { emoji: 'üìû', te: '‡∞¶‡±Ç‡∞∞‡∞µ‡∞æ‡∞£‡∞ø', letters: ['‡∞¶‡±Ç', '‡∞∞', '‡∞µ‡∞æ', '‡∞£‡∞ø'] }, { emoji: 'üå°Ô∏è', te: '‡∞â‡∞∑‡±ç‡∞£‡±ã‡∞ó‡±ç‡∞∞‡∞§', letters: ['‡∞â', '‡∞∑‡±ç‡∞£‡±ã', '‡∞ó‡±ç‡∞∞', '‡∞§'] }, { emoji: '‚ö°', te: '‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡±Å‡∞ö‡±ç‡∞õ‡∞ï‡±ç‡∞§‡∞ø', letters: ['‡∞µ‡∞ø', '‡∞¶‡±ç‡∞Ø‡±Å', '‡∞ö‡±ç‡∞õ', '‡∞ï‡±ç‡∞§‡∞ø'] }, { emoji: 'üåå', te: '‡∞®‡∞ï‡±ç‡∞∑‡∞§‡±ç‡∞∞‡∞æ‡∞≤‡±Å', letters: ['‡∞®', '‡∞ï‡±ç‡∞∑', '‡∞§‡±ç‡∞∞‡∞æ', '‡∞≤‡±Å'] }, { emoji: 'üîë', te: '‡∞§‡∞æ‡∞≥‡∞Ç‡∞ö‡±Ü‡∞µ‡∞ø', letters: ['‡∞§‡∞æ', '‡∞≥‡∞Ç', '‡∞ö‡±Ü', '‡∞µ‡∞ø'] }, { emoji: 'üçâ', te: '‡∞™‡±Å‡∞ö‡±ç‡∞ö‡∞ï‡∞æ‡∞Ø', letters: ['‡∞™‡±Å', '‡∞ö‡±ç‡∞ö', '‡∞ï‡∞æ', '‡∞Ø'] }, { emoji: 'üßº', te: '‡∞∏‡∞¨‡±ç‡∞¨‡±Å‡∞¨‡∞ø‡∞≥‡±ç‡∞≥', letters: ['‡∞∏', '‡∞¨‡±ç‡∞¨‡±Å', '‡∞¨‡∞ø', '‡∞≥‡±ç‡∞≥'] }
            ],
            4: [ // Level 4: 5+ Syllable words
                { emoji: 'ÔøΩ', te: '‡∞∞‡∞æ‡∞Æ‡∞ö‡∞ø‡∞≤‡±Å‡∞ï', letters: ['‡∞∞‡∞æ', '‡∞Æ', '‡∞ö‡∞ø', '‡∞≤‡±Å', '‡∞ï'] }, { emoji: 'üß∏', te: '‡∞Ü‡∞ü‡∞¨‡±ä‡∞Æ‡±ç‡∞Æ‡∞≤‡±Å', letters: ['‡∞Ü', '‡∞ü', '‡∞¨‡±ä', '‡∞Æ‡±ç‡∞Æ', '‡∞≤‡±Å'] }, { emoji: 'üß∫', te: '‡∞µ‡∞ø‡∞π‡∞æ‡∞∞‡∞Ø‡∞æ‡∞§‡±ç‡∞∞', letters: ['‡∞µ‡∞ø', '‡∞π‡∞æ', '‡∞∞', '‡∞Ø‡∞æ', '‡∞§‡±ç‡∞∞'] }, { emoji: 'üçΩÔ∏è', te: '‡∞≠‡±ã‡∞ú‡∞®‡∞∂‡∞æ‡∞≤', letters: ['‡∞≠‡±ã', '‡∞ú', '‡∞®', '‡∞∂‡∞æ', '‡∞≤'] }, { emoji: 'üõí', te: '‡∞Ö‡∞Ç‡∞ó‡∞°‡∞ø‡∞µ‡±Ä‡∞ß‡∞ø', letters: ['‡∞Ö‡∞Ç', '‡∞ó', '‡∞°‡∞ø', '‡∞µ‡±Ä', '‡∞ß‡∞ø'] }, { emoji: 'üé®', te: '‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞≤‡±á‡∞ñ‡∞®‡∞Ç', letters: ['‡∞ö‡∞ø', '‡∞§‡±ç‡∞∞', '‡∞≤‡±á', '‡∞ñ', '‡∞®‡∞Ç'] }, { emoji: 'üî≠', te: '‡∞¶‡±Ç‡∞∞‡∞¶‡∞∞‡±ç‡∞∂‡∞ø‡∞®‡∞ø', letters: ['‡∞¶‡±Ç', '‡∞∞', '‡∞¶', '‡∞∞‡±ç‡∞∂‡∞ø', '‡∞®‡∞ø'] }, { emoji: 'üé¨', te: '‡∞ö‡∞≤‡∞®‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞Ç', letters: ['‡∞ö', '‡∞≤', '‡∞®', '‡∞ö‡∞ø', '‡∞§‡±ç‡∞∞‡∞Ç'] }, { emoji: 'üß™', te: '‡∞™‡±ç‡∞∞‡∞Ø‡±ã‡∞ó‡∞∂‡∞æ‡∞≤', letters: ['‡∞™‡±ç‡∞∞', '‡∞Ø‡±ã', '‡∞ó', '‡∞∂‡∞æ', '‡∞≤'] }, { emoji: 'üõ∞Ô∏è', te: '‡∞â‡∞™‡∞ó‡±ç‡∞∞‡∞π‡∞Æ‡±Å', letters: ['‡∞â', '‡∞™', '‡∞ó‡±ç‡∞∞', '‡∞π', '‡∞Æ‡±Å'] }, { emoji: 'ü•í', te: '‡∞ï‡∞æ‡∞ï‡∞∞‡∞ï‡∞æ‡∞Ø', letters: ['‡∞ï‡∞æ', '‡∞ï', '‡∞∞', '‡∞ï‡∞æ', '‡∞Ø'] }, { emoji: 'üèûÔ∏è', te: '‡∞â‡∞¶‡±ç‡∞Ø‡∞æ‡∞®‡∞µ‡∞®‡∞Ç', letters: ['‡∞â', '‡∞¶‡±ç‡∞Ø‡∞æ', '‡∞®', '‡∞µ', '‡∞®‡∞Ç'] }, { emoji: 'handkerchief', te: '‡∞ö‡±á‡∞§‡∞ø‡∞∞‡±Å‡∞Æ‡∞æ‡∞≤‡±Å', letters: ['‡∞ö‡±á', '‡∞§‡∞ø', '‡∞∞‡±Å', '‡∞Æ‡∞æ', '‡∞≤‡±Å'] }, { emoji: 'üì∫', te: '‡∞ü‡±Ü‡∞≤‡∞ø‡∞µ‡∞ø‡∞ú‡∞®‡±Å', letters: ['‡∞ü‡±Ü', '‡∞≤‡∞ø', '‡∞µ‡∞ø', '‡∞ú', '‡∞®‡±Å'] }, { emoji: 'üå¶Ô∏è', te: '‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç', letters: ['‡∞µ‡∞æ', '‡∞§‡∞æ', '‡∞µ', '‡∞∞', '‡∞£‡∞Ç'] }, { emoji: 'üî¨', te: '‡∞µ‡∞ø‡∞ú‡±ç‡∞û‡∞æ‡∞®‡∞∂‡∞æ‡∞∏‡±ç‡∞§‡±ç‡∞∞‡∞Ç', letters: ['‡∞µ‡∞ø', '‡∞ú‡±ç‡∞û‡∞æ', '‡∞®', '‡∞∂‡∞æ', '‡∞∏‡±ç‡∞§‡±ç‡∞∞‡∞Ç'] }, { emoji: 'üèôÔ∏è', te: '‡∞Ü‡∞ï‡∞æ‡∞∂‡∞π‡∞∞‡±ç‡∞Æ‡±ç‡∞Ø‡∞Ç', letters: ['‡∞Ü', '‡∞ï‡∞æ', '‡∞∂', '‡∞π', '‡∞∞‡±ç‡∞Æ‡±ç‡∞Ø‡∞Ç'] }, { emoji: 'üß≤', te: '‡∞Ö‡∞Ø‡∞∏‡±ç‡∞ï‡∞æ‡∞Ç‡∞§‡∞Æ‡±Å', letters: ['‡∞Ö', '‡∞Ø', '‡∞∏‡±ç‡∞ï‡∞æ‡∞Ç',, '‡∞§' '‡∞Æ‡±Å'] }, { emoji: 'üìù', te: '‡∞™‡∞∞‡±Ä‡∞ï‡±ç‡∞∑‡∞™‡∞§‡±ç‡∞∞‡∞Ç', letters: ['‡∞™', '‡∞∞‡±Ä', '‡∞ï‡±ç‡∞∑', '‡∞™', '‡∞§‡±ç‡∞∞‡∞Ç'] }, { emoji: 'üåä', te: '‡∞ú‡∞≤‡∞™‡∞æ‡∞§‡∞Æ‡±Å', letters: ['‡∞ú', '‡∞≤', '‡∞™‡∞æ', '‡∞§', '‡∞Æ‡±Å'] }, { emoji: 'üßà', te: '‡∞®‡∞µ‡∞®‡±Ä‡∞§‡∞Æ‡±Å', letters: ['‡∞®', '‡∞µ', '‡∞®‡±Ä', '‡∞§', '‡∞Æ‡±Å'] }, { emoji: 'üî¢', te: '‡∞ó‡∞£‡∞ø‡∞§‡∞∂‡∞æ‡∞∏‡±ç‡∞§‡±ç‡∞∞‡∞Ç', letters: ['‡∞ó', '‡∞£‡∞ø', '‡∞§', '‡∞∂‡∞æ', '‡∞∏‡±ç‡∞§‡±ç‡∞∞‡∞Ç'] }, { emoji: 'üèãÔ∏è', te: '‡∞µ‡±ç‡∞Ø‡∞æ‡∞Ø‡∞æ‡∞Æ‡∞∂‡∞æ‡∞≤', letters: ['‡∞µ‡±ç‡∞Ø‡∞æ', '‡∞Ø‡∞æ', '‡∞Æ', '‡∞∂‡∞æ', '‡∞≤'] }, { emoji: '‚úàÔ∏è', te: '‡∞µ‡∞ø‡∞Æ‡∞æ‡∞®‡∞æ‡∞∂‡±ç‡∞∞‡∞Ø‡∞Ç', letters: ['‡∞µ‡∞ø', '‡∞Æ‡∞æ', '‡∞®‡∞æ', '‡∞∂‡±ç‡∞∞', '‡∞Ø‡∞Ç'] }, { emoji: 'üèñÔ∏è', te: '‡∞∏‡∞Æ‡±Å‡∞¶‡±ç‡∞∞‡∞§‡±Ä‡∞∞‡∞Ç', letters: ['‡∞∏', '‡∞Æ‡±Å', '‡∞¶‡±ç‡∞∞', '‡∞§‡±Ä', '‡∞∞‡∞Ç'] }, { emoji: 'üì∞', te: '‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Æ‡±Å', letters: ['‡∞∏', '‡∞Æ‡∞æ', '‡∞ö‡∞æ', '‡∞∞', '‡∞Æ‡±Å'] }, { emoji: 'ü•û', te: '‡∞Ö‡∞≤‡±ç‡∞™‡∞æ‡∞π‡∞æ‡∞∞‡∞Æ‡±Å', letters: ['‡∞Ö', '‡∞≤‡±ç‡∞™‡∞æ', '‡∞π‡∞æ', '‡∞∞', '‡∞Æ‡±Å'] }, { emoji: 'ü•î', te: '‡∞¨‡∞Ç‡∞ó‡∞æ‡∞≥‡∞æ‡∞¶‡±Å‡∞Ç‡∞™', letters: ['‡∞¨‡∞Ç', '‡∞ó‡∞æ', '‡∞≥‡∞æ', '‡∞¶‡±Å‡∞Ç', '‡∞™'] }, { emoji: 'üåç', te: '‡∞™‡∞∞‡±ç‡∞Ø‡∞æ‡∞µ‡∞∞‡∞£‡∞Æ‡±Å', letters: ['‡∞™', '‡∞∞‡±ç‡∞Ø‡∞æ', '‡∞µ', '‡∞∞', '‡∞£', '‡∞Æ‡±Å'] }, { emoji: 'üöí', te: '‡∞Ö‡∞ó‡±ç‡∞®‡∞ø‡∞Æ‡∞æ‡∞™‡∞ï‡∞Æ‡±Å', letters: ['‡∞Ö', '‡∞ó‡±ç‡∞®‡∞ø', '‡∞Æ‡∞æ', '‡∞™', '‡∞ï', '‡∞Æ‡±Å'] }, { emoji: 'üî≠', te: '‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞≤‡∞Ø‡∞Ç', letters: ['‡∞µ‡∞ø', '‡∞∂‡±ç‡∞µ', '‡∞µ‡∞ø', '‡∞¶‡±ç‡∞Ø‡∞æ', '‡∞≤', '‡∞Ø‡∞Ç'] }, { emoji: 'üö≤', te: '‡∞¶‡±ç‡∞µ‡∞ø‡∞ö‡∞ï‡±ç‡∞∞‡∞µ‡∞æ‡∞π‡∞®‡∞Ç', letters: ['‡∞¶‡±ç‡∞µ‡∞ø', '‡∞ö', '‡∞ï‡±ç‡∞∞', '‡∞µ‡∞æ', '‡∞π', '‡∞®‡∞Ç'] }, { emoji: 'üåï', te: '‡∞ö‡∞Ç‡∞¶‡±ç‡∞∞‡∞Æ‡∞Ç‡∞°‡∞≤‡∞Ç', letters: ['‡∞ö‡∞Ç', '‡∞¶‡±ç‡∞∞', '‡∞Æ‡∞Ç', '‡∞°', '‡∞≤‡∞Ç'] }, { emoji: 'üó∫Ô∏è', te: '‡∞≠‡±Ç‡∞ó‡±ã‡∞≥‡∞∂‡∞æ‡∞∏‡±ç‡∞§‡±ç‡∞∞‡∞Ç', letters: ['‡∞≠‡±Ç', '‡∞ó‡±ã', '‡∞≥', '‡∞∂‡∞æ', '‡∞∏‡±ç‡∞§‡±ç‡∞∞‡∞Ç'] }, { emoji: 'üöÇ', te: '‡∞Ü‡∞µ‡∞ø‡∞∞‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞Æ‡±Å', letters: ['‡∞Ü', '‡∞µ‡∞ø', '‡∞∞‡∞ø', '‡∞Ø‡∞Ç', '‡∞§‡±ç‡∞∞', '‡∞Æ‡±Å'] }, { emoji: 'üìö', te: '‡∞ó‡±ç‡∞∞‡∞Ç‡∞•‡∞æ‡∞≤‡∞Ø‡∞Ç', letters: ['‡∞ó‡±ç‡∞∞‡∞Ç', '‡∞•‡∞æ', '‡∞≤', '‡∞Ø‡∞Ç'] }, { emoji: 'üè≠', te: '‡∞ï‡∞∞‡±ç‡∞Æ‡∞æ‡∞ó‡∞æ‡∞∞‡∞Ç', letters: ['‡∞ï', '‡∞∞‡±ç‡∞Æ‡∞æ', '‡∞ó‡∞æ', '‡∞∞‡∞Ç'] }, { emoji: 'üè•', te: '‡∞Ü‡∞∏‡±Å‡∞™‡∞§‡±ç‡∞∞‡∞ø', letters: ['‡∞Ü', '‡∞∏‡±Å', '‡∞™', '‡∞§‡±ç‡∞∞‡∞ø'] }, { emoji: 'ü™Å', te: '‡∞ó‡∞æ‡∞≤‡∞ø‡∞™‡∞ü‡∞Æ‡±Å', letters: ['‡∞ó‡∞æ', '‡∞≤‡∞ø', '‡∞™', '‡∞ü', '‡∞Æ‡±Å'] }, { emoji: 'üöÄ', te: '‡∞∞‡±ã‡∞¶‡∞∏‡±Ä‡∞®‡±å‡∞ï', letters: ['‡∞∞‡±ã', '‡∞¶', '‡∞∏‡±Ä', '‡∞®‡±å', '‡∞ï'] }
            ]
        };
        const MAX_LEVEL = Object.keys(wordLevels).length;
        const WORDS_PER_LEVEL = 5;

        // --- DOM ELEMENTS ---
        const scoreEl = document.getElementById('score');
        const timerEl = document.getElementById('timer');
        const levelDisplayEl = document.getElementById('level-display');
        const emojiContainer = document.getElementById('emoji-container');
        const answerSlotsContainer = document.getElementById('answer-slots');
        const letterTilesContainer = document.getElementById('letter-tiles');
        const feedbackMessageEl = document.getElementById('feedback-message');
        const mainGameArea = document.getElementById('main-game-area');
        const startFooter = document.getElementById('start-footer');
        
        // Buttons
        const startButton = document.getElementById('start-button');
        const playAgainButton = document.getElementById('play-again-button');
        const startLevelButton = document.getElementById('start-level-button');

        // Modals
        const levelModal = document.getElementById('level-modal');
        const levelModalTitle = document.getElementById('level-modal-title');
        const gameOverModal = document.getElementById('game-over-modal');
        const gameOverTitle = document.getElementById('game-over-title');
        const gameOverMessage = document.getElementById('game-over-message');
        const finalScoreEl = document.getElementById('final-score');
        
        // --- GAME STATE ---
        let score = 0;
        let timeLeft = 10;
        let timerInterval;
        let currentLevel = 1;
        let wordOrderInLevel = [];
        let wordIndexInLevel = 0;
        let currentWord = null;
        let draggedElement = null;
        let consecutiveMisses = 0;
        
        // --- EVENT LISTENERS ---
        startButton.addEventListener('click', () => {
             startFooter.classList.add('hidden');
             mainGameArea.classList.remove('hidden');
             prepareLevel(currentLevel) 
        });
        playAgainButton.addEventListener('click', resetAndStartGame);
        startLevelButton.addEventListener('click', () => {
            levelModal.classList.add('hidden');
            startLevel();
        });
        
        // --- GAME FLOW FUNCTIONS ---

        function resetAndStartGame() {
            score = 0;
            updateScore(0);
            currentLevel = 1;
            consecutiveMisses = 0;
            gameOverModal.classList.add('hidden');
            prepareLevel(currentLevel);
        }

        function prepareLevel(level) {
            currentLevel = level;
            levelModalTitle.textContent = `‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø ${level}`;
            levelModal.classList.remove('hidden');
        }

        function startLevel() {
            levelDisplayEl.textContent = `‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø ${currentLevel}`;
            wordIndexInLevel = 0;
            const wordsForLevel = wordLevels[currentLevel];
            // Shuffle the indices and take the first 5 for the level
            const allWordIndices = [...Array(wordsForLevel.length).keys()];
            wordOrderInLevel = shuffleArray(allWordIndices).slice(0, WORDS_PER_LEVEL);
            loadNextWord();
        }
        
        function loadNextWord() {
            if (wordIndexInLevel >= wordOrderInLevel.length) {
                handleLevelComplete();
                return;
            }
            
            const wordIdx = wordOrderInLevel[wordIndexInLevel];
            currentWord = wordLevels[currentLevel][wordIdx];
            
            // Clear previous state
            feedbackMessageEl.textContent = '';
            feedbackMessageEl.className = 'text-3xl font-bold h-10 mb-4 transition-all duration-300';
            answerSlotsContainer.innerHTML = '';
            
            // Setup UI
            emojiContainer.textContent = currentWord.emoji;
            
            currentWord.letters.forEach((_, index) => {
                const slot = document.createElement('div');
                slot.className = 'answer-slot bg-white/80 border-4 border-dashed border-slate-400 rounded-2xl w-16 h-16 sm:w-20 sm:h-20 flex justify-center items-center';
                slot.dataset.index = index;
                answerSlotsContainer.appendChild(slot);
            });
            
            const shuffledLetters = shuffleArray([...currentWord.letters]);
            displayLetterTiles(shuffledLetters);
            
            resetTimer();
            startTimer();
        }

        function displayLetterTiles(letters) {
            letterTilesContainer.innerHTML = '';
            letters.forEach((letter, index) => {
                const tile = document.createElement('div');
                tile.id = `tile-${index}`;
                tile.className = 'letter-tile telugu-text bg-amber-300 hover:bg-amber-400 text-amber-800 text-2xl sm:text-4xl font-bold w-16 h-16 sm:w-20 sm:h-20 flex justify-center items-center rounded-2xl shadow-lg cursor-grab transition-all duration-200';
                tile.textContent = letter;
                tile.draggable = true;
                letterTilesContainer.appendChild(tile);
            });
            addDragListeners();
        }
        
        function checkAnswer() {
            const slots = answerSlotsContainer.children;
            const placedTiles = Array.from(slots).map(slot => slot.firstChild);

            if (placedTiles.some(tile => !tile)) return; // Not all slots are filled

            const userAnswer = placedTiles.map(tile => tile.textContent).join('');

            if (userAnswer === currentWord.te) {
                handleCorrectAnswer();
            } else {
                handleIncorrectAnswer();
            }
        }
        
        function handleCorrectAnswer() {
            clearInterval(timerInterval);
            consecutiveMisses = 0; // Reset misses on correct answer
            const pointsGained = (currentLevel * 5) + timeLeft;
            updateScore(score + pointsGained);
            
            feedbackMessageEl.textContent = '‡∞ö‡∞æ‡∞≤‡∞æ ‡∞¨‡∞æ‡∞ó‡±Å‡∞Ç‡∞¶‡∞ø!';
            feedbackMessageEl.classList.add('text-green-600');
            answerSlotsContainer.classList.add('correct-pop-animation');
            
            wordIndexInLevel++;
            setTimeout(() => {
                 answerSlotsContainer.classList.remove('correct-pop-animation');
                 loadNextWord();
            }, 1500);
        }

        function handleIncorrectAnswer() {
            feedbackMessageEl.textContent = '‡∞Æ‡∞≥‡±ç‡∞≥‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡±Å';
            feedbackMessageEl.classList.add('text-red-600');
            answerSlotsContainer.classList.add('incorrect-shake-animation');

            setTimeout(() => {
                const slots = Array.from(answerSlotsContainer.children);
                slots.forEach(slot => {
                    if (slot.firstChild) {
                        letterTilesContainer.appendChild(slot.firstChild);
                    }
                });
                feedbackMessageEl.textContent = '';
                answerSlotsContainer.classList.remove('incorrect-shake-animation');
            }, 1000);
        }

        function handleTimeOut() {
            clearInterval(timerInterval);
            consecutiveMisses++;
            feedbackMessageEl.textContent = '‡∞∏‡∞Æ‡∞Ø‡∞Ç ‡∞Æ‡±Å‡∞ó‡∞ø‡∞∏‡∞ø‡∞Ç‡∞¶‡∞ø!';
            feedbackMessageEl.classList.add('text-orange-600');
            
            if (consecutiveMisses >= 3) {
                setTimeout(() => endGame(false), 1500); // Game over after 3 misses
            } else {
                wordIndexInLevel++;
                setTimeout(loadNextWord, 1500);
            }
        }

        function handleLevelComplete() {
            if (currentLevel < MAX_LEVEL) {
                currentLevel++;
                prepareLevel(currentLevel);
            } else {
                endGame(true); // Victory!
            }
        }
        
        function endGame(isVictory) {
            clearInterval(timerInterval);
            finalScoreEl.textContent = score;
            if(isVictory) {
                gameOverTitle.textContent = '‡∞Ö‡∞≠‡∞ø‡∞®‡∞Ç‡∞¶‡∞®‡∞≤‡±Å!';
                gameOverMessage.textContent = '‡∞Æ‡±Ä‡∞∞‡±Å ‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø‡∞≤‡∞®‡±Å ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞ö‡±á‡∞∏‡∞æ‡∞∞‡±Å!';
            } else {
                gameOverTitle.textContent = '‡∞Ü‡∞ü ‡∞Æ‡±Å‡∞ó‡∞ø‡∞∏‡∞ø‡∞Ç‡∞¶‡∞ø!';
                gameOverMessage.textContent = '‡∞Æ‡±Ä‡∞∞‡±Å ‡∞µ‡∞∞‡±Å‡∞∏‡∞ó‡∞æ 3 ‡∞™‡∞¶‡∞æ‡∞≤‡∞®‡±Å ‡∞ï‡±ã‡∞≤‡±ç‡∞™‡±ã‡∞Ø‡∞æ‡∞∞‡±Å.';
            }
            gameOverModal.classList.remove('hidden');
        }

        // --- UTILITY & HELPER FUNCTIONS ---
        
        function updateScore(newScore) {
            score = newScore;
            scoreEl.textContent = score;
        }
        
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;
                if (timeLeft <= 0) {
                   handleTimeOut();
                }
            }, 1000);
        }
        
        function resetTimer() {
            clearInterval(timerInterval);
            timeLeft = 10;
            timerEl.textContent = timeLeft;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- DRAG AND DROP LOGIC (Enhanced for Touch) ---
        function addDragListeners() {
            const tiles = document.querySelectorAll('.letter-tile');
            const slots = document.querySelectorAll('.answer-slot');
            const sourceContainer = letterTilesContainer;

            // --- Desktop Drag Events ---
            tiles.forEach(tile => {
                tile.addEventListener('dragstart', (e) => {
                    draggedElement = e.target;
                    setTimeout(() => e.target.classList.add('dragging-active'), 0);
                });
                tile.addEventListener('dragend', (e) => {
                    e.target.classList.remove('dragging-active');
                    draggedElement = null;
                });
            });

            // --- Touch Events ---
            let originalParent = null;
            const onTouchStart = (e) => {
                if (e.target.classList.contains('letter-tile')) {
                    draggedElement = e.target;
                    originalParent = draggedElement.parentNode;
                    draggedElement.classList.add('dragging-active');
                    document.body.appendChild(draggedElement);
                    draggedElement.style.position = 'absolute';
                    draggedElement.style.zIndex = '1000';
                    moveElementWithTouch(e);
                }
            };
            const onTouchMove = (e) => {
                if (draggedElement) {
                    e.preventDefault();
                    moveElementWithTouch(e);
                }
            };
            const onTouchEnd = (e) => {
                if (!draggedElement) return;

                draggedElement.style.visibility = 'hidden';
                const touch = e.changedTouches[0];
                const dropTarget = document.elementFromPoint(touch.clientX, touch.clientY);
                draggedElement.style.visibility = 'visible';
                
                draggedElement.style.position = '';
                draggedElement.style.zIndex = '';
                draggedElement.classList.remove('dragging-active');

                const targetSlot = dropTarget ? (dropTarget.classList.contains('answer-slot') ? dropTarget : dropTarget.closest('.answer-slot')) : null;
                
                if (targetSlot && !targetSlot.firstChild) {
                    targetSlot.appendChild(draggedElement);
                    checkAnswer();
                } else {
                    originalParent.appendChild(draggedElement);
                }
                draggedElement = null;
            };

            const gameArea = document.getElementById('main-game-area');
            gameArea.addEventListener('touchstart', onTouchStart, { passive: false });
            gameArea.addEventListener('touchmove', onTouchMove, { passive: false });
            gameArea.addEventListener('touchend', onTouchEnd);
            
            const moveElementWithTouch = (e) => {
                 const touch = e.touches[0];
                 draggedElement.style.left = `${touch.clientX - draggedElement.offsetWidth / 2}px`;
                 draggedElement.style.top = `${touch.clientY - draggedElement.offsetHeight / 2}px`;
            }

            // --- Shared Drop Logic ---
            const setupDropZone = (zone) => {
                zone.addEventListener('dragover', (e) => e.preventDefault());
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    if (!draggedElement) return;
                    if (zone.classList.contains('answer-slot') && !zone.firstChild) {
                         zone.appendChild(draggedElement);
                         checkAnswer();
                    } 
                    else if (zone === sourceContainer) {
                        sourceContainer.appendChild(draggedElement);
                    }
                });
            };
            slots.forEach(slot => setupDropZone(slot));
            setupDropZone(sourceContainer);
        }

        // --- Initial UI State ---
        function setInitialUI() {
            mainGameArea.classList.add('hidden');
            startFooter.classList.remove('hidden');
        }

        setInitialUI();
    });
    </script>
</body>
</html>
ÔøΩ
